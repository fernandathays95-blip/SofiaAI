<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>{{ nome_ia }} - IA Offline</title>
<style>
body {
    background-color: #101820;
    color: #fff;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh;
    margin: 0;
}
.chat-box {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
}
.msg {
    margin: 10px 0;
}
.user {
    color: #7ec8e3;
}
.ia {
    color: #f6c90e;
}
input {
    padding: 10px;
    width: 80%;
    border: none;
    border-radius: 5px;
    font-size: 16px;
}
button {
    padding: 10px;
    background-color: #f6c90e;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
footer {
    display: flex;
    padding: 10px;
    background: #1c2833;
}
</style>
</head>
<body>
<div class="chat-box" id="chatBox"></div>
<footer>
  <input id="msgInput" placeholder="Digite sua mensagem..." autocomplete="off">
  <button onclick="enviar()">Enviar</button>
</footer>

<script>
const chatBox = document.getElementById("chatBox");
const input = document.getElementById("msgInput");

function adicionarMensagem(classe, texto) {
  const div = document.createElement("div");
  div.className = "msg " + classe;
  div.textContent = texto;
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function enviar() {
  const texto = input.value.trim();
  if (!texto) return;
  adicionarMensagem("user", "VocÃª: " + texto);
  input.value = "";

  fetch("/mensagem", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({texto})
  })
  .then(r => r.json())
  .then(dados => adicionarMensagem("ia", "{{ nome_ia }}: " + dados.resposta))
  .catch(() => adicionarMensagem("ia", "Erro ao responder."));
}

input.addEventListener("keypress", e => {
  if (e.key === "Enter") enviar();
});
</script>
</body>
</html>
